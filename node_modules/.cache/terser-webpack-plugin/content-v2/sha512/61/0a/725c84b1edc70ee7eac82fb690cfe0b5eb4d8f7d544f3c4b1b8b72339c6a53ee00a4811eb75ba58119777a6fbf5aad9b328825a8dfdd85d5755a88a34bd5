{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{207:function(e,a){},212:function(e,a,t){\"use strict\";t.r(a);var s=t(0),c=t.n(s),r=t(6),n=t(10),l=t(11),m=t(183),i=t.n(m),u=t(3);a.default=function(){const e=Object(s.useRef)(null),a=Object(s.useContext)(r.a),t=Object(s.useContext)(n.a),m=Object(s.useRef)(null),o=Object(s.useRef)(null),[h,f]=Object(l.a)({fieldValue:\"\",chatMessages:[]});return Object(s.useEffect)(()=>{a.isChatOpen&&(m.current.focus(),t({type:\"clearUnreadChatCount\"}))},[a.isChatOpen]),Object(s.useEffect)(()=>(e.current=i()(\"http://localhost:8080\"),e.current.on(\"chatFromServer\",e=>{f(a=>{a.chatMessages.push(e)})}),()=>e.current.disconnect()),[]),Object(s.useEffect)(()=>{o.current.scrollTop=o.current.scrollHeight,h.chatMessages.length&&!a.isChatOpen&&t({type:\"addUnreadChatCount\"})},[h.chatMessages]),c.a.createElement(\"div\",{id:\"chat-wrapper\",className:\"chat-wrapper shadow border-top border-left border-right \"+(a.isChatOpen?\"chat-wrapper--is-visible\":\"\")},c.a.createElement(\"div\",{className:\"chat-title-bar bg-primary\"},\"Chat\",c.a.createElement(\"span\",{onClick:()=>t({type:\"closeChat\"}),className:\"chat-title-bar-close\"},c.a.createElement(\"i\",{className:\"fas fa-times-circle\"}))),c.a.createElement(\"div\",{id:\"chat\",ref:o,className:\"chat-log\"},h.chatMessages.map((e,t)=>e.username==a.user.username?c.a.createElement(\"div\",{key:t,className:\"chat-self\"},c.a.createElement(\"div\",{className:\"chat-message\"},c.a.createElement(\"div\",{className:\"chat-message-inner\"},e.message)),c.a.createElement(\"img\",{className:\"chat-avatar avatar-tiny\",src:e.avatar})):c.a.createElement(\"div\",{key:t,className:\"chat-other\"},c.a.createElement(u.b,{to:\"/profile/\"+e.username},c.a.createElement(\"img\",{className:\"avatar-tiny\",src:e.avatar})),c.a.createElement(\"div\",{className:\"chat-message\"},c.a.createElement(\"div\",{className:\"chat-message-inner\"},c.a.createElement(u.b,{to:\"/profile/\"+e.username},c.a.createElement(\"strong\",null,e.username,\": \")),e.message))))),c.a.createElement(\"form\",{onSubmit:function(t){t.preventDefault(),e.current.emit(\"chatFromBrowser\",{message:h.fieldValue,token:a.user.token}),f(e=>{e.chatMessages.push({message:e.fieldValue,username:a.user.username,avatar:a.user.avatar}),e.fieldValue=\"\"})},id:\"chatForm\",className:\"chat-form border-top\"},c.a.createElement(\"input\",{onChange:function(e){const a=e.target.value;f(e=>{e.fieldValue=a})},ref:m,value:h.fieldValue,type:\"text\",className:\"chat-field\",id:\"chatField\",placeholder:\"Type a messageâ€¦\",autoComplete:\"off\"})))}}}]);","extractedComments":[]}